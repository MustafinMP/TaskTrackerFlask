{% extends "basic_template.html" %}
{% block navbar %}{% include 'navbar.html' %}{% endblock %}
{% block content %}
<div class="navbar m-5 mx-auto w-75">
    <div class="container">
        <nav class="navbar">
            <a href="{{ url_for('tasks.tasks_by_statuses') }}" class="btn btn-outline-secondary btn-lg me-4">Вернуться</a>
            <a href="/tasks/edit/{{ task.id }}" class="btn btn-primary btn-lg me-4">Изменить</a>
            <a href="/tasks/delete/{{ task.id }}" class="btn btn-outline-danger btn-lg">Удалить</a>
        </nav>
    </div>
</div>
<div class="m-5 p-5 mx-auto w-75 bg-light">
    <h1 class="card-title py-2">{{ task.name }}</h1>
    <p class="card-body py-2">Автор: {{ task.creator.name }}</p>
    <p class="card-body py-5">{{ task.description }}</p>
    <form action="" method="post" class="mb-3 w-75 bg-light needs-validation" novalidate>
        {{ form.csrf_token }}
        {{ form.new_status.label(class="d-block mb-2") }}
        <div class="d-inline-block align-text-top">
            {{ form.new_status(class="form-select", onChange="Selected(this)") }}<br>
            {% for error in form.new_status.errors %}
            <div class="alert alert-danger" role="alert">
                {{ error }}
            </div>
            {% endfor %}
        </div>
        <div class="d-inline-block align-text-top ms-2">
            {{ form.submit(type="submit", class="btn btn-primary", id="SubmitButton", style="display: none") }}
        </div>
        {% if save %}
        <div class="d-inline-block align-text-top ms-2">
            <button id="SaveLabel" type="button" class="btn btn-light" disabled>Сохранено</button>
        </div>
        {% endif %}
    </form>
</div>
<script>
    function Selected(a) {
	    var label = a.value;
        if (label=={{ form.new_status.data }}) {
	    	document.getElementById("SubmitButton").style.display='none';
	    	document.getElementById("SaveLabel").style.display='none';
	    } else {
	    	document.getElementById("SubmitButton").style.display='block';
	    	document.getElementById("SaveLabel").style.display='none';
	    }

    }
</script>
<!--<script src="../../static/js/show_task.js"></script>-->
<!--<script>-->

<!--fetch('http://127.0.0.1:5000/tasks/get')-->
<!--  .then(response => {-->
<!--    if (response.ok) {-->
<!--      return response.json(); // Parse the response data as JSON-->
<!--    } else {-->
<!--      throw new Error('API request failed');-->
<!--    }-->
<!--  })-->
<!--  .then(data => {-->
<!--    // Process the response data here-->
<!--    console.log(data); // Example: Logging the data to the console-->
<!--  })-->
<!--  .catch(error => {-->
<!--    // Handle any errors here-->
<!--    console.error(error); // Example: Logging the error to the console-->
<!--  });-->

<!--</script>-->
{% endblock %}