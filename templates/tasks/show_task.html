{% extends "basic_template.html" %}

{% block content %}
<div class="navbar m-5 mx-auto w-75">
    <div class="container">
        <nav class="navbar">
            <a href="/tasks" class="btn btn-outline-secondary btn-lg me-4">Вернуться</a>
            <a href="/tasks/edit/{{ task.id }}" class="btn btn-primary btn-lg">Изменить</a>
        </nav>
    </div>
</div>
<div class="m-5 p-5 mx-auto w-75 bg-light">
    <h1 class="card-title py-2">{{ task.name }}</h1>
    <p class="card-body py-2">Автор: {{ task.creator.name }}</p>
    <p class="card-body py-5">{{ task.description }}</p>
    <form action="" method="post" class="mb-3 w-75 bg-light needs-validation" novalidate>
        {{ form.new_status.label(class="d-block mb-2") }}
        {{ form.csrf_token }}
        <div class="d-inline-block align-text-top">
            {{ form.new_status(class="form-select", onChange="Selected(this)") }}<br>
            {% for error in form.new_status.errors %}
            <div class="alert alert-danger" role="alert">
                {{ error }}
            </div>
            {% endfor %}
        </div>
        <div class="d-inline-block align-text-top ms-2">
            {{ form.submit(type="submit", class="btn btn-primary", id="SubmitButton", style="display: none") }}
        </div>
        {% if save %}
        <div class="d-inline-block align-text-top ms-2">
            <button id="SaveLabel" type="button" class="btn btn-light" disabled>Сохранено</button>
        </div>
        {% endif %}
    </form>
</div>
<script>
    function Selected(a) {
	var label = a.value;
	if (label=={{ form.new_status.data }}) {
		document.getElementById("SubmitButton").style.display='none';
		document.getElementById("SaveLabel").style.display='none';
	} else {
		document.getElementById("SubmitButton").style.display='block';
		document.getElementById("SaveLabel").style.display='none';
	}

}
</script>
{% endblock %}